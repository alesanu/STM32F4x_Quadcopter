/*
 * MPU6000.h
 *
 *  Created on: 4/01/2013
 *      Author: Florian
 */

#ifndef MPU6000_H_
#define MPU6000_H_

#include <stdint.h>
#include <stdbool.h>


bool mpu6k_init();
uint8_t mpu6k_readRegister(uint8_t addr);
void    mpu6k_readRegisters(uint8_t addr, uint8_t num, uint8_t* data);
void    mpu6k_writeRegister(uint8_t addr, uint8_t data);

#define MPU6K_I_AM_MPU6K 0x68

// MPU6000 registers
#define MPU6K_REG_XG_OFFS_TC 0x00
#define MPU6K_REG_YG_OFFS_TC 0x01
#define MPU6K_REG_ZG_OFFS_TC 0x02
#define MPU6K_REG_X_FINE_GAIN 0x03
#define MPU6K_REG_Y_FINE_GAIN 0x04
#define MPU6K_REG_Z_FINE_GAIN 0x05
#define MPU6K_REG_XA_OFFS_H 0x06
#define MPU6K_REG_XA_OFFS_L 0x07
#define MPU6K_REG_YA_OFFS_H 0x08
#define MPU6K_REG_YA_OFFS_L 0x09
#define MPU6K_REG_ZA_OFFS_H 0x0A
#define MPU6K_REG_ZA_OFFS_L 0x0B
#define MPU6K_REG_PRODUCT_ID 0x0C
#define MPU6K_REG_XG_OFFS_USRH 0x13
#define MPU6K_REG_XG_OFFS_USRL 0x14
#define MPU6K_REG_YG_OFFS_USRH 0x15
#define MPU6K_REG_YG_OFFS_USRL 0x16
#define MPU6K_REG_ZG_OFFS_USRH 0x17
#define MPU6K_REG_ZG_OFFS_USRL 0x18
#define MPU6K_REG_SMPLRT_DIV 0x19
#define MPU6K_REG_CONFIG 0x1A
#define MPU6K_REG_GYRO_CONFIG 0x1B
#define MPU6K_REG_ACCEL_CONFIG 0x1C
#define MPU6K_REG_INT_PIN_CFG 0x37
#define MPU6K_REG_INT_ENABLE 0x38
#define MPU6K_REG_ACCEL_XOUT_H 0x3B
#define MPU6K_REG_ACCEL_XOUT_L 0x3C
#define MPU6K_REG_ACCEL_YOUT_H 0x3D
#define MPU6K_REG_ACCEL_YOUT_L 0x3E
#define MPU6K_REG_ACCEL_ZOUT_H 0x3F
#define MPU6K_REG_ACCEL_ZOUT_L 0x40
#define MPU6K_REG_TEMP_OUT_H 0x41
#define MPU6K_REG_TEMP_OUT_L 0x42
#define MPU6K_REG_GYRO_XOUT_H 0x43
#define MPU6K_REG_GYRO_XOUT_L 0x44
#define MPU6K_REG_GYRO_YOUT_H 0x45
#define MPU6K_REG_GYRO_YOUT_L 0x46
#define MPU6K_REG_GYRO_ZOUT_H 0x47
#define MPU6K_REG_GYRO_ZOUT_L 0x48
#define MPU6K_REG_USER_CTRL 0x6A
#define MPU6K_REG_PWR_MGMT_1 0x6B
#define MPU6K_REG_PWR_MGMT_2 0x6C
#define MPU6K_REG_BANK_SEL 0x6D
#define MPU6K_REG_MEM_START_ADDR 0x6E
#define MPU6K_REG_MEM_R_W 0x6F
#define MPU6K_REG_DMP_CFG_1 0x70
#define MPU6K_REG_DMP_CFG_2 0x71
#define MPU6K_REG_FIFO_COUNTH 0x72
#define MPU6K_REG_FIFO_COUNTL 0x73
#define MPU6K_REG_FIFO_R_W 0x74
#define MPU6K_REG_WHOAMI 0x75


#define MPU6K_BIT_DEVICE_RESET (1<<7)
#define MPU6K_BIT_I2C_I_DIS    (1<<4)


#define MPU6K_MSK_CLKSEL ((1<<0)|(1<<1)|(1<<2))
#define MPU6K_BIT_CLKSEL_INTERNAL	0
#define MPU6K_BIT_CLKSEL_PLLGX		1
#define MPU6K_BIT_CLKSEL_PLLGY		2
#define MPU6K_BIT_CLKSEL_PLLGZ		3
#define MPU6K_BIT_CLKSEL_EXT32K		4
#define MPU6K_BIT_CLKSEL_EXT19M		5
#define MPU6K_BIT_CLKSEL_STOP		7

#define MPU6K_MSK_DLPF_CFG ((1<<0)|(1<<1)|(1<<2))
#define MPU6K_BIT_DLPF_CFG_256HZ	0
#define MPU6K_BIT_DLPF_CFG_188HZ	1
#define MPU6K_BIT_DLPF_CFG_98HZ		2
#define MPU6K_BIT_DLPF_CFG_42HZ		3
#define MPU6K_BIT_DLPF_CFG_20HZ		4
#define MPU6K_BIT_DLPF_CFG_10HZ		5
#define MPU6K_BIT_DLPF_CFG_5HZ		6

#define MPU6K_MSK_GYRO_CONFIG_FS_SEL ((1<<3)|(1<<4))
#define MPU6K_BIT_GYRO_CONFIG_FS_SEL_250DEG 0
#define MPU6K_BIT_GYRO_CONFIG_FS_SEL_500DEG (1<<3)
#define MPU6K_BIT_GYRO_CONFIG_FS_SEL_1000DEG (2<<3)
#define MPU6K_BIT_GYRO_CONFIG_FS_SEL_2000DEG (3<<3)

#define MPU6K_MSK_ACCEL_CONFIG_AFS_SEL ((1<<3)|(1<<4))
#define MPU6K_BIT_ACCEL_CONFIG_AFS_SEL_2G 0
#define MPU6K_BIT_ACCEL_CONFIG_AFS_SEL_4G (1<<3)
#define MPU6K_BIT_ACCEL_CONFIG_AFS_SEL_8G (2<<3)
#define MPU6K_BIT_ACCEL_CONFIG_AFS_SEL_16G (3<<3)



#endif /* MPU6000_H_ */
